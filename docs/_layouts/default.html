<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% if page.title %}{{ page.title }} - {% endif %}{{ site.title }}</title>
  <meta name="description" content="{{ page.description | default: site.description }}">
  
  <!-- SEO -->
  {% seo %}
  
  <!-- Stylesheets -->
  <link rel="stylesheet" href="{{ '/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}">
  
  <!-- Favicons -->
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🔨</text></svg>">
</head>
<body>
  <!-- Mobile Menu Toggle -->
  <button class="mobile-menu-toggle" onclick="toggleSidebar()" aria-label="Toggle Menu">
    ☰
  </button>

  <!-- Dark Mode Toggle -->
  <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle Dark Mode" title="Toggle Dark Mode">
    <span class="theme-icon">🌙</span>
  </button>

  <div class="page-wrapper">
    <!-- Sidebar Navigation -->
    <nav class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <h1 class="sidebar-title">🔨 Bodge</h1>
        <p class="sidebar-subtitle">The Idiotic Build System</p>
      </div>
      
      <ul class="nav-menu">
        <li class="nav-item">
          <a href="{{ '/' | relative_url }}" class="nav-link {% if page.url == '/' or page.url == '/index.html' %}active{% endif %}">
            <span class="nav-icon">🏠</span>
            <span>Home</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="{{ '/getting-started' | relative_url }}" class="nav-link {% if page.url contains 'getting-started' %}active{% endif %}">
            <span class="nav-icon">🚀</span>
            <span>Getting Started</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="{{ '/configuration' | relative_url }}" class="nav-link {% if page.url contains 'configuration' %}active{% endif %}">
            <span class="nav-icon">⚙️</span>
            <span>Configuration</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="{{ '/automatic-source-collection' | relative_url }}" class="nav-link {% if page.url contains 'automatic-source-collection' %}active{% endif %}">
            <span class="nav-icon">📁</span>
            <span>Auto Source Collection</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="{{ '/internationalization' | relative_url }}" class="nav-link {% if page.url contains 'internationalization' %}active{% endif %}">
            <span class="nav-icon">🌍</span>
            <span>Internationalization</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="{{ '/daemon-mode' | relative_url }}" class="nav-link {% if page.url contains 'daemon-mode' %}active{% endif %}">
            <span class="nav-icon">👁️</span>
            <span>Daemon Mode</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="{{ '/examples' | relative_url }}" class="nav-link {% if page.url contains 'examples' %}active{% endif %}">
            <span class="nav-icon">📚</span>
            <span>Examples</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="{{ '/contributing' | relative_url }}" class="nav-link {% if page.url contains 'contributing' %}active{% endif %}">
            <span class="nav-icon">🤝</span>
            <span>Contributing</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="{{ '/windows-terminal-setup' | relative_url }}" class="nav-link {% if page.url contains 'windows-terminal-setup' %}active{% endif %}">
            <span class="nav-icon">💻</span>
            <span>Windows Terminal Setup</span>
          </a>
        </li>
      </ul>

      <div style="padding: 1.5rem; margin-top: 2rem; border-top: 1px solid var(--border-color);">
        <a href="https://github.com/{{ site.repository }}" class="btn btn-secondary" style="width: 100%; text-align: center;">
          View on GitHub
        </a>
        <a href="https://github.com/{{ site.repository }}/releases" class="btn" style="width: 100%; text-align: center; margin-top: 0.5rem;">
          Download
        </a>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
      {{ content }}

      <!-- Footer -->
      <footer class="page-footer">
        <p>Made with ❤️ by Swen "El Dockerr" Kalski</p>
        <p>
          <a href="https://github.com/{{ site.repository }}">GitHub</a> • 
          <a href="https://github.com/{{ site.repository }}/issues">Issues</a> • 
          <a href="https://github.com/{{ site.repository }}/releases">Releases</a>
        </p>
        <p style="font-size: 0.875rem; margin-top: 1rem;">
          Licensed under the Bodge License (BL-V1.0)
        </p>
      </footer>
    </main>
  </div>

  <!-- Scripts -->
  <script>
    function toggleSidebar() {
      const sidebar = document.getElementById('sidebar');
      sidebar.classList.toggle('active');
    }

    // Close sidebar when clicking outside on mobile
    document.addEventListener('click', function(event) {
      const sidebar = document.getElementById('sidebar');
      const toggle = document.querySelector('.mobile-menu-toggle');
      
      if (window.innerWidth <= 768 && 
          !sidebar.contains(event.target) && 
          !toggle.contains(event.target) &&
          sidebar.classList.contains('active')) {
        sidebar.classList.remove('active');
      }
    });

    // Dark mode toggle
    function toggleTheme() {
      const html = document.documentElement;
      const currentTheme = html.getAttribute('data-theme');
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      
      html.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);
      
      // Update icon
      const icon = document.querySelector('.theme-icon');
      icon.textContent = newTheme === 'dark' ? '☀️' : '🌙';
    }

    // Load saved theme
    (function() {
      const savedTheme = localStorage.getItem('theme') || 
                        (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
      document.documentElement.setAttribute('data-theme', savedTheme);
      
      // Update icon based on theme
      const icon = document.querySelector('.theme-icon');
      if (icon) {
        icon.textContent = savedTheme === 'dark' ? '☀️' : '🌙';
      }
    })();

    // Add smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
      });
    });
  </script>

  {% if site.google_analytics %}
  <script async src="https://www.googletagmanager.com/gtag/js?id={{ site.google_analytics }}"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', '{{ site.google_analytics }}');
  </script>
  {% endif %}
</body>
</html>

